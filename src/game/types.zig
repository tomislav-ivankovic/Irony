const std = @import("std");
const memory = @import("../memory/root.zig");

pub const AttackType = enum(u32) {
    not_attack = 0xC000001D,
    high = 0xA000050F,
    mid = 0x8000020A,
    low = 0x20000112,
    special_mid = 0x60000402,
    high_unblockable = 0x2000081B,
    mid_unblockable = 0xC000071A,
    low_unblockable = 0x2000091A,
    throw = 0x60000A1D,
    projectile = 0x10000302,
    antiair_only = 0x10000B1A,
};

pub const HitOutcome = enum(u32) {
    none = 0,
    blocked_standing = 1,
    blocked_crouching = 2,
    juggle = 3,
    screw = 4,
    unknown_screw_5 = 5,
    unknown_6 = 6,
    unknown_screw_7 = 7,
    grounded_face_down = 8,
    grounded_face_up = 9,
    counter_hit_standing = 10,
    counter_hit_crouching = 11,
    normal_hit_standing = 12,
    normal_hit_crouching = 13,
    normal_hit_standing_left = 14,
    normal_hit_crouching_left = 15,
    normal_hit_standing_back = 16,
    normal_hit_crouching_back = 17,
    normal_hit_standing_right = 18,
    normal_hit_crouching_right = 19,
};

pub const Stun = packed struct(u32) {
    _0: u1 = 0,
    _1: u1 = 0,
    _2: u1 = 0,
    _3: u1 = 0,
    _4: u1 = 0,
    _5: u1 = 0,
    _6: u1 = 0,
    _7: u1 = 0,
    _8: u1 = 0,
    _9: u1 = 0,
    _10: u1 = 0,
    _11: u1 = 0,
    _12: u1 = 0,
    _13: u1 = 0,
    _14: u1 = 0,
    _15: u1 = 0,
    any_stun: u1 = 0,
    _17: u1 = 0,
    _18: u1 = 0,
    _19: u1 = 0,
    _20: u1 = 0,
    _21: u1 = 0,
    _22: u1 = 0,
    _23: u1 = 0,
    attacking: u1 = 0,
    _25: u1 = 0,
    _26: u1 = 0,
    _27: u1 = 0,
    _28: u1 = 0,
    _29: u1 = 0,
    _30: u1 = 0,
    _31: u1 = 0,
};

pub const CancelFlags = packed struct(u32) {
    _0: u1 = 0,
    _1: u1 = 0,
    _2: u1 = 0,
    _3: u1 = 0,
    _4: u1 = 0,
    _5: u1 = 0,
    _6: u1 = 0,
    _7: u1 = 0,
    _8: u1 = 0,
    _9: u1 = 0,
    _10: u1 = 0,
    _11: u1 = 0,
    _12: u1 = 0,
    _13: u1 = 0,
    _14: u1 = 0,
    _15: u1 = 0,
    cancellable: u1 = 0,
    _17: u1 = 0,
    _18: u1 = 0,
    _19: u1 = 0,
    _20: u1 = 0,
    _21: u1 = 0,
    _22: u1 = 0,
    _23: u1 = 0,
    _24: u1 = 0,
    _25: u1 = 0,
    _26: u1 = 0,
    _27: u1 = 0,
    _28: u1 = 0,
    _29: u1 = 0,
    _30: u1 = 0,
    _31: u1 = 0,
};

pub const Player = memory.StructWithOffsets(0x3170, &.{
    .{ .name = "player_id", .type = i32, .offset = 0x0004 },
    .{ .name = "is_picked_by_main_player", .type = bool, .offset = 0x0009 },
    .{ .name = "character_id", .type = i32, .offset = 0x0168 },
    .{ .name = "character_id_2", .type = i32, .offset = 0x016C },
    .{ .name = "position_x", .type = f32, .offset = 0x0170 },
    .{ .name = "position_y", .type = f32, .offset = 0x0178 },
    .{ .name = "position_y_relative_to_floor", .type = f32, .offset = 0x0184 },
    .{ .name = "position_x_relative_to_floor", .type = f32, .offset = 0x018C },
    .{ .name = "position_z_relative_to_floor", .type = f32, .offset = 0x01A4 },
    .{ .name = "location", .type = [4]f32, .offset = 0x0210 },
    .{ .name = "b7", .type = f32, .offset = 0x0340 },
    .{ .name = "current_frame_int", .type = i32, .offset = 0x0370 },
    .{ .name = "current_frame_float", .type = f32, .offset = 0x039C },
    .{ .name = "current_move_pointer", .type = u64, .offset = 0x03B8 },
    .{ .name = "current_move_pointer_2", .type = u64, .offset = 0x03C0 },
    .{ .name = "previous_move_pointer", .type = u64, .offset = 0x03C8 },
    .{ .name = "attack_damage", .type = i32, .offset = 0x04E4 },
    .{ .name = "attack_type", .type = AttackType, .offset = 0x04F0 },
    .{ .name = "current_move_id", .type = i32, .offset = 0x051C },
    .{ .name = "move", .type = i32, .offset = 0x059C },
    .{ .name = "hit_outcome", .type = HitOutcome, .offset = 0x05E4 },
    .{ .name = "already_attacked", .type = i32, .offset = 0x0644 },
    .{ .name = "stun", .type = Stun, .offset = 0x074C },
    .{ .name = "cancel_flags", .type = CancelFlags, .offset = 0x0C58 },
    .{ .name = "floor_number_1", .type = i32, .offset = 0x1650 },
    .{ .name = "frame_data_flags", .type = i32, .offset = 0x18C0 },
    .{ .name = "next_move_pointer", .type = u64, .offset = 0x1E10 },
    .{ .name = "next_move_id", .type = i32, .offset = 0x1E2C },
    .{ .name = "reaction_to_have", .type = i32, .offset = 0x1E30 },
    .{ .name = "attack_input", .type = i32, .offset = 0x1E50 },
    .{ .name = "direction_input", .type = i32, .offset = 0x1E54 },
    .{ .name = "health", .type = i32, .offset = 0x2DC4 },
});
